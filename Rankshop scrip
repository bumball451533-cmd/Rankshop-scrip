-- ==========================================
--        RANKSHOPPLUS | STABLE FIX v4
-- ==========================================

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- [ 1. ‡∏£‡∏∞‡∏ö‡∏ö INTRO RANKSHOPPLUS ]
local function ShowIntro()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "RSP_Intro"
    screenGui.Parent = CoreGui
    screenGui.IgnoreGuiInset = true

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "RANKSHOPPLUS"
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextSize = 65
    textLabel.TextTransparency = 1
    textLabel.Parent = screenGui

    local uiStroke = Instance.new("UIStroke")
    uiStroke.Thickness = 4
    uiStroke.Color = Color3.fromRGB(255, 0, 0)
    uiStroke.Transparency = 1
    uiStroke.Parent = textLabel

    TweenService:Create(textLabel, TweenInfo.new(1), {TextTransparency = 0}):Play()
    TweenService:Create(uiStroke, TweenInfo.new(1), {Transparency = 0}):Play()
    task.wait(2)
    TweenService:Create(textLabel, TweenInfo.new(1), {TextTransparency = 1}):Play()
    TweenService:Create(uiStroke, TweenInfo.new(1), {Transparency = 1}):Play()
    task.wait(1)
    screenGui:Destroy()
end

-- [ 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏µ‡∏¢‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ]
local function CheckExpiry(key)
    local fileName = "RSP_" .. key .. ".json"
    local currentTime = os.time()
    local oneDay = 86400

    if isfile(fileName) then
        local success, data = pcall(function() return HttpService:JSONDecode(readfile(fileName)) end)
        if not success then return true, "üîÑ ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà..." end
        
        if currentTime > data.expire then
            return false, "‚ùå ‡∏Ñ‡∏µ‡∏¢‡πå‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß!"
        else
            return true, "‚úÖ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≠)"
        end
    else
        local data = {expire = currentTime + oneDay}
        writefile(fileName, HttpService:JSONEncode(data))
        return true, "üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 24 ‡∏ä‡∏°.!"
    end
end

-- [ 3. ‡πÇ‡∏´‡∏•‡∏î GUI ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö ]
local FluentURL = "https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"
local success, Fluent = pcall(function() return loadstring(game:HttpGet(FluentURL))() end)

if not success then
    warn("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î Fluent ‡πÑ‡∏î‡πâ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á")
    return
end

ShowIntro()

local AdminKeys = { ["RSP-ADMIN-9999"] = true, ["RSP-ADMIN-2026"] = true }
local DailyKeys = {}
for i=1, 100 do DailyKeys[string.format("RSP-NEW-%03d", i)] = true end

local Window = Fluent:CreateWindow({
    Title = "RANKSHOPPLUS",
    SubTitle = "Security System v4",
    TabWidth = 160, Size = UDim2.fromOffset(450, 300),
    Acrylic = true, Theme = "Dark"
})

local Tab = Window:AddTab({ Title = "Verify Key", Icon = "key" })
local KeyInput = ""

Tab:AddInput("Input", {
    Title = "‡∏õ‡πâ‡∏≠‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
    Callback = function(Value) KeyInput = string.upper(Value):gsub("%s+", "") end
})

Tab:AddButton({
    Title = "Check Key",
    Callback = function()
        if AdminKeys[KeyInput] then
            Fluent:Notify({Title="RANKSHOPPLUS", Content="üëë ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", Duration=5})
            Window:Destroy()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/bumball451533-cmd/Rankshop-scrip/refs/heads/main/Rankshop%20scrip"))()
        elseif DailyKeys[KeyInput] then
            local is_valid, msg = CheckExpiry(KeyInput)
            if is_valid then
                Fluent:Notify({Title="RANKSHOPPLUS", Content=msg, Duration=5})
                Window:Destroy()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/bumball451533-cmd/Rankshop-scrip/refs/heads/main/Rankshop%20scrip"))()
            else
                Fluent:Notify({Title="RANKSHOPPLUS", Content=msg, Duration=5})
            end
        else
            Fluent:Notify({Title="RANKSHOPPLUS", Content="‚ùå ‡∏Ñ‡∏µ‡∏¢‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!", Duration=5})
        end
    end
})

Tab:AddButton({
    Title = "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",
    Callback = function() setclipboard("‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ RANKSHOPPLUS") end
})
